{% extends "layout.html" %}

{% block body %}
  <div class="masthead" style="display: none">
    <ul class="nav nav-pills pull-right">
      <li class="active"><a href="#">Home</a></li>
      <li><a href="#">About</a></li>
      <li><a href="#">Contact</a></li>
    </ul>
    <h3 class="muted">PriceChecker.py</h3>
  </div>

  <hr style="display:none">

   <!-- XXX either bootstrap-responsive grids or tables -->

   <div style="width:50%;margin:0 auto">

   <h1>Track changes with PyChecker</h1>
   <p>Please make sure the following information is correct and click Finish.</p>

<style>
.width { width:90%; }
</style>
   <form action="/regex/add?confirm=true" method=POST enctype="multipart/form-data">
	<input type=hidden name='ss' value='{{ data['ss'] }}' />
	<input type=hidden name='html' value='{{ data['request']['html'] }}' />
	<input type=hidden name='original_xpath' value='{{ data['request']['xpath'] }}' />

	<table border=0 cellspacing=0 cellpadding=0 width=100%>
	<colgroup>
	<col width=20% /> <col width=80% />
	</colgroup>

        <tr>
        <td valign=top>URL</td>
        <td><input disabled class=width type=text name="url" value="{{ data['tab']['url'] }}" />
    	<img class=width style="height:250px !important" src="{{ data['ss'] }}" />
	</td></tr>
        <tr>
        <td>Title</td>
        <td><input disabled class=width type=text name="name" value="{{ data['tab']['title'] }}" /></td>
        </tr>
	<tr>
	<td>XPath</td>
	<td><textarea class=width rows=3 name="xpath">{{ data['request']['xpath'] }}</textarea>
	<br>* Only change this value if you know that you need to *
	</td>
	</tr>

	<tr><td colspan=2>
	<h2>Tracking Threshold</h2>
	For prices or numeric data, Notify me when the data changes within the following range:
	</td></tr>
	
	<tr>
	<td><label for="price-range">Price Range:</label></td>
	<td>
	<input type=text id="price-range" name="price-range" />
	<div id="price-range-slider" />
	</td></tr>

	<tr>
	<td>Sample Data:</td>
	<td><input class=width type=text name="text" value="{{ data['request']['text'] }}" /></td>
	</tr>

	<tr>
	<td>Notification:</td>
	<td>
	<label for="notify-any">
	<input type=checkbox id="notify-any" name="notify-any" />
	Notify me on ANY change
	</label>
	
	<label for="notify-error">
	<input type=checkbox id="notify-error" name="notify-error" />
	Notify me on errors
	</label>
	</tr>

	<tr>
	<td>Notify my:</td>
	<td>
	<select name="notify-which">
	<option value="Email">Email</option>
	<option value="SMS">Phone/SMS</option>
	<option value="Twitter">Twitter</option>
	</select>
	<input size=25 type=text name="notify-who" value="" />
	</td></tr>

	<tr>
	<td>Product Name</td>
	<td><input class=width type=text name="name" /></td>
	</tr>

	</table>

	<button type=submit>Finish</button>
   </form>  
   </div>

{% endblock %}

{% block scripts %}
	<script>
	$(document).ready(function() {
    	  $( "#price-range-slider" ).slider({
 	     range: true,
    	     min: 0,
             max: 500,
	     values: [ 75, 300 ],
      	     slide: function( event, ui ) {
        	$( "#amount" ).val( "$" + ui.values[ 0 ] + " - $" + ui.values[ 1 ] );
      	     }
    	  });
    	  $( "#amount" ).val( "$" + $( "#slider-range" ).slider( "values", 0 ) +
      		" - $" + $( "#slider-range" ).slider( "values", 1 ) );
  	});
	</script>
{% endblock %}

